server:
  port: 8090 # Konteyner i√ßi port

spring:
  application:
    name: api-gateway
  cloud:
    gateway:
      routes:
        # --- AUTH SERVICE (Port 8083) ---
        - id: auth-service
          uri: http://auth-service-container:8083
          predicates:
            - Path=/api/auth/**

        # --- CATALOG SERVICE (Port 8081) ---
        - id: catalog-service-public
          uri: http://catalog-service-container:8081
          predicates:
            - Path=/api/products/**, /api/categories/**
            - Method=GET
        - id: catalog-service-secured
          uri: http://catalog-service-container:8081
          predicates:
            - Path=/api/products/**, /api/categories/**
            - Method=POST, PUT, DELETE
          filters:
            - AuthenticationFilter

        # --- MERCHANT SERVICE (Port 8082) ---
        - id: merchant-service-public
          uri: http://merchant-service-container:8082
          predicates:
            - Path=/api/stores/**
            - Method=GET
        - id: merchant-service-secured
          uri: http://merchant-service-container:8082
          predicates:
            - Path=/api/stores/**
            - Method=POST, PUT, DELETE
          filters:
            - AuthenticationFilter

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus,metrics